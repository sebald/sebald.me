@layer components {
  .prose {
    @apply text-prose;

    font-family: var(--font-mono);
    color: var(--color-oatmeal-950);
    line-height: 1.75;
    text-box-trim: trim-both;

    display: grid;
    grid-template-columns:
      1fr
      min(var(--prose-width), 100%)
      1fr;

    & > * {
      grid-column: 2;
    }

    /* Default spacing */
    & > * + * {
      margin-top: theme(spacing.8);
    }

    /* Headlines */
    & > * + h2 {
      margin-top: theme(spacing.12);
    }
    & > * + h3 {
      margin-top: theme(spacing.10);
    }

    & h2 + *,
    & h3 + * {
      margin-top: theme(spacing.3);
    }

    & h4 + *,
    & h5 + * {
      margin-top: theme(spacing.2);
    }

    /* Breakout elements */
    & > img,
    & > figure:has(img),
    & > [data-breakout] {
      grid-column: 1 / -1;
      margin-inline: auto;
    }
    & > [data-breakout] {
      width: 100%;
    }

    /* Lists */
    & ul {
      margin: 1rem 0;

      & li {
        position: relative;
        padding-left: 1.25em;
        margin-bottom: 0.5rem;
        line-height: 1.5;

        &::before {
          content: 'â€¢';
          position: absolute;
          left: 0;
          top: 0;
          font-weight: bold;
          color: var(--color-black-400);
        }
      }
    }

    & ol {
      list-style: none;
      counter-reset: prose-counter;
      padding-left: 0;
      margin: 1rem 0;

      & li {
        display: flex;
        align-items: baseline;
        gap: 0.75rem;
        counter-increment: prose-counter;
        margin-bottom: 0.5rem;

        &::before {
          content: counter(prose-counter) '.';
          font-weight: bold;
          color: var(--color-black-400);
          flex-shrink: 0; /* Prevents number from squishing */
          min-width: 1ch; /* Align single vs double digits */
        }
      }
    }
  }
}
